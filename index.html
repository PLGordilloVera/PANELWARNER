<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Panel de Control - Warner Bienes RaÃ­ces</title>

  <!-- Tailwind (opcional, ya definido en tu original) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0F172A;
      --panel:#0b1220;
      --accent:#F59E0B;
      --accent-dark:#D97706;
      --muted:#94a3b8;
      --card-radius:12px;
      --sidebar-w:16rem;
      --max-width:1200px;
    }

    /* Reset / base */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,"Helvetica Neue",Arial;}
    body{background:var(--bg);color:#e5e7eb;overflow:hidden}

    /* Layout */
    .app-layout{display:grid;grid-template-columns:var(--sidebar-w) 1fr;min-height:100vh;transition:all .28s cubic-bezier(.2,.8,.2,1);}
    .app-layout.collapsed{grid-template-columns:0 1fr}

    aside{
      background:linear-gradient(180deg,#071028 0%, #07203a 100%);
      padding:1.25rem .75rem;
      color:white;
      position:fixed;
      left:0;top:0;
      width:var(--sidebar-w);
      height:100vh;
      box-shadow:4px 0 18px rgba(2,6,23,.6);
      display:flex;flex-direction:column;gap:0.6rem;z-index:60;
      transition:transform .28s ease;
    }
    .app-layout.collapsed aside{transform:translateX(-100%)}

    .sidebar-header{padding:.25rem .5rem;border-bottom:1px solid rgba(255,255,255,.04);}
    .warner-logo{font-weight:800;color:var(--accent);letter-spacing:.8px}
    .sidebar-sub{color:var(--muted);font-size:.85rem}

    nav{display:flex;flex-direction:column;gap:.2rem;padding:.75rem .25rem;overflow:auto}

    .nav-button{
      display:flex;align-items:center;gap:.6rem;padding:.6rem .75rem;border-radius:.5rem;
      color:inherit;background:transparent;border:0;text-align:left;cursor:pointer;font-weight:600;
      transition:all .14s ease;
    }
    .nav-button:hover{background:rgba(255,255,255,0.02)}
    .nav-button.active{background:linear-gradient(90deg, rgba(255,255,255,.03), rgba(255,255,255,.01));border-left:4px solid var(--accent);padding-left:.6rem}

    #sidebar-toggle{
      position:fixed;left:calc(var(--sidebar-w) - 2rem);top:1.1rem;z-index:70;
      background:var(--accent);color:#081226;border-radius:999px;padding:.55rem;display:flex;align-items:center;justify-content:center;
      box-shadow:0 6px 18px rgba(0,0,0,.25);border:0;cursor:pointer;
      transition:all .22s ease;
    }
    .app-layout.collapsed #sidebar-toggle{left:.9rem;transform:rotate(180deg)}

    /* Content */
    main.content-area{
      grid-column:2 / 3;padding:1.75rem 2rem;height:100vh;overflow:auto;
      display:flex;flex-direction:column;gap:1.25rem;
    }

    .page {
      width:100%;max-width:var(--max-width);margin:0 auto;flex:1;display:flex;flex-direction:column;gap:1rem;
    }

    /* Section card (white panels) */
    .section {
      background:#fff;color:#0f172a;padding:1.75rem;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,23,.12);
    }
    .section-header{display:flex;flex-direction:column;gap:.25rem;margin-bottom:1rem}
    .section h2{font-size:1.75rem;margin:0}
    .section p.lead{color:#475569;margin:0;font-size:.98rem}

    /* Dashboard grid of big buttons (mosaicos) */
    .tiles{
      display:grid;grid-template-columns:repeat(1,1fr);gap:1.25rem;
    }
    @media(min-width:640px){.tiles{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:1024px){.tiles{grid-template-columns:repeat(4,1fr)}}

    .dashboard-btn{
      display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.5rem;
      min-height:7.5rem;padding:1rem;border-radius:16px;color:#fff;text-decoration:none;
      background:linear-gradient(145deg,var(--accent) 0%,var(--accent-dark) 100%);
      box-shadow:0 6px 20px rgba(2,6,23,.18);transition:transform .14s ease,box-shadow .14s ease;
      border:1px solid rgba(255,255,255,.06);
    }
    .dashboard-btn:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(2,6,23,.22)}
    .dashboard-btn .btn-icon{font-size:2.1rem;filter:drop-shadow(0 3px 6px rgba(0,0,0,.23))}
    .dashboard-btn .btn-text{font-weight:800;font-size:.95rem;letter-spacing:.06em;text-transform:uppercase}

    .dashboard-btn.red{background:linear-gradient(145deg,#dc2626 0%,#991b1b 100%)}

    /* Iframe containers */
    .iframe-section-style{padding:0;background:#0b1220;border-radius:12px;overflow:hidden;height:70vh;display:flex;flex-direction:column}
    .iframe-container{flex:1;min-height:200px;overflow:hidden}
    .iframe-container iframe{width:100%;height:100%;border:0;display:block}

    /* Utilities */
    .muted{color:var(--muted)}
    .grid-sm{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}
    .center{display:flex;align-items:center;justify-content:center}

    /* Responsive behavior: small screens collapse sidebar and move toggle */
    @media(max-width:800px){
      :root{--sidebar-w:0}
      .app-layout{grid-template-columns:0 1fr}
      aside{position:fixed;left:0;top:0;transform:translateX(-100%)}
      .app-layout.show-aside aside{transform:translateX(0)}
      #sidebar-toggle{left:.9rem;top:1rem}
      main.content-area{padding:1rem}
    }

    /* Accessibility & motion */
    @media (prefers-reduced-motion: reduce){
      *{transition:none!important;animation:none!important}
    }
  </style>
</head>
<body>
  <div class="app-layout" id="app-layout">

    <!-- SIDEBAR -->
    <aside role="navigation" aria-label="NavegaciÃ³n principal" id="sidebar">
      <div class="sidebar-header">
        <div class="warner-logo">WARNER <span style="color:#fff;font-weight:600">PANEL</span></div>
        <div class="sidebar-sub">Herramientas de gestiÃ³n</div>
      </div>

      <nav id="main-nav" aria-label="Secciones">
        <hr class="border-b border-white/5 my-2" style="opacity:.06" />
        <button class="nav-button active" data-target="database-section" aria-controls="database-section">ğŸ“‚ <span class="ml-3">Bases de Datos</span></button>
        <button class="nav-button" data-target="rendimiento-section" aria-controls="rendimiento-section">ğŸ“ˆ <span class="ml-3">Rendimiento Agentes</span></button>
        <button class="nav-button" data-target="agente-del-mes-section" aria-controls="agente-del-mes-section">ğŸ† <span class="ml-3">Agente del Mes</span></button>
        <button class="nav-button" data-target="competencias-warner-section" aria-controls="competencias-warner-section">ğŸ® <span class="ml-3">Competencias Warner</span></button>
        <button class="nav-button" data-target="forms-section" aria-controls="forms-section">ğŸ“ <span class="ml-3">Registros / Formularios</span></button>
        <button class="nav-button" data-target="map-section" aria-controls="map-section">ğŸ—ºï¸ <span class="ml-3">Mapa de Inmuebles</span></button>
        <button class="nav-button" data-target="procedimientos-section" aria-controls="procedimientos-section">ğŸ“š <span class="ml-3">Procedimientos</span></button>
      </nav>
    </aside>

    <!-- SIDEBAR TOGGLE -->
    <button id="sidebar-toggle" aria-label="Alternar menÃº lateral" title="Mostrar / Ocultar menÃº">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#081226" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>

    <!-- MAIN CONTENT -->
    <main class="content-area" id="main">
      <div class="page">

        <!-- DATABASE SECTION -->
        <section id="database-section" class="section" role="region" aria-labelledby="db-title">
          <div class="section-header">
            <h2 id="db-title">Bases de Datos</h2>
            <p class="lead muted">Acceso directo a las hojas de cÃ¡lculo de la oficina.</p>
          </div>

          <div class="tiles" aria-hidden="false">
            <a class="dashboard-btn" href="https://docs.google.com/spreadsheets/d/1Y80pLiAlu7RBZApq6KyOYIHBgCMYPKB76NpjpbhC-7w/edit?resourcekey=&gid=2110786399#gid=2110786399" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon" aria-hidden="true">ğŸ </div>
              <div class="btn-text">Cartera de Inmuebles</div>
            </a>

            <a class="dashboard-btn" href="https://docs.google.com/spreadsheets/d/18pRQM5NbZ0oOqQjFTY_lJD5J6bCWVccZGOuc78-XIWM/edit?gid=545566366#gid=545566366" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon" aria-hidden="true">ğŸ‘¥</div>
              <div class="btn-text">Clientes</div>
            </a>

            <a class="dashboard-btn" href="https://docs.google.com/spreadsheets/d/1SDUb-IJjsTxbMKj6ZOy1rLxjZRrNO5Eh-vUaWYNFFNs/edit?resourcekey=&gid=42079202#gid=42079202" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon" aria-hidden="true">ğŸ’µ</div>
              <div class="btn-text">ValuaciÃ³n</div>
            </a>

            <a class="dashboard-btn" href="https://docs.google.com/spreadsheets/d/1-IUCSxz3Rh9vmajMxunfWEXcVjW2OjkBmtQ_B03Cn7k/edit?gid=206032840#gid=206032840" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon" aria-hidden="true">ğŸ‘ï¸</div>
              <div class="btn-text">Visitas</div>
            </a>

            <a class="dashboard-btn" href="https://docs.google.com/spreadsheets/d/12Bi0Hn1FO0Fu5ZHT2c1BqVJKxD-ILEwo07TH0R15wEU/edit?resourcekey=&gid=46106711#gid=46106711" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon" aria-hidden="true">ğŸ“¢</div>
              <div class="btn-text">Publicidad</div>
            </a>

            <a class="dashboard-btn" href="https://docs.google.com/spreadsheets/d/1y1Ten0vMXceRXGzZELn63msgmtrluJltPnaBfIFWQdg/edit?gid=299938101#gid=299938101" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon" aria-hidden="true">ğŸª§</div>
              <div class="btn-text">Carteles</div>
            </a>

            <a class="dashboard-btn" href="https://docs.google.com/spreadsheets/d/134NRMjC-CJH9Aeipa3D9XE_4XhfLd7nO6b1j-sQfX2U/edit?resourcekey=&gid=302664252#gid=302664252" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon" aria-hidden="true">â­</div>
              <div class="btn-text">ReseÃ±as</div>
            </a>
          </div>
        </section>

        <!-- Rendimiento (iframe) -->
        <section id="rendimiento-section" class="section hidden iframe-section-style" role="region" aria-labelledby="rend-title">
          <div class="section-header">
            <h2 id="rend-title">Rendimiento Agentes</h2>
            <p class="lead muted">Indicadores y paneles por agente.</p>
          </div>
          <div class="iframe-container">
            <iframe data-src="rendimiento.html" title="Rendimiento Agentes" loading="lazy"></iframe>
          </div>
        </section>

        <!-- Agente del mes (iframe) -->
        <section id="agente-del-mes-section" class="section hidden iframe-section-style" role="region" aria-labelledby="agente-title">
          <div class="section-header">
            <h2 id="agente-title">Agente del Mes</h2>
            <p class="lead muted">Resumen y reconocimiento.</p>
          </div>
          <div class="iframe-container">
            <iframe data-src="AGENTEDELMES.HTML" title="Agente del Mes" loading="lazy"></iframe>
          </div>
        </section>

        <!-- Competencias (iframe external) -->
        <section id="competencias-warner-section" class="section hidden iframe-section-style" role="region" aria-labelledby="comp-title">
          <div class="section-header">
            <h2 id="comp-title">Competencias Warner</h2>
            <p class="lead muted">Juegos y actividades internas.</p>
          </div>
          <div class="iframe-container">
            <iframe data-src="https://plgordillovera.github.io/warnerjuegos/index.html" title="Competencias Warner" loading="lazy"></iframe>
          </div>
        </section>

        <!-- Formularios -->
        <section id="forms-section" class="section hidden" role="region" aria-labelledby="forms-title">
          <div class="section-header">
            <h2 id="forms-title">Formularios de Registro</h2>
            <p class="lead muted">Selecciona el formulario para ingresar nuevos datos.</p>
          </div>

          <div class="tiles">
            <a class="dashboard-btn" href="https://docs.google.com/forms/d/1gPomLJJAnwZHvBwXMEx7OuY4TfKEPwhCLEJtYjXxf2A/edit" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸ“</div>
              <div class="btn-text">Cartera Inmuebles</div>
            </a>
            <a class="dashboard-btn" href="https://docs.google.com/forms/d/1tdOzpeJjsD9LIvFIlrcAqCI_lwsjb0l1qM9UrIU4jQs/edit" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸª§</div>
              <div class="btn-text">Carteles</div>
            </a>
            <a class="dashboard-btn" href="https://docs.google.com/forms/d/1_DyiIEZzDPO9vcnAV6IkAqStyRHdErLH3bn17Ygm2xY/edit" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸ‘¤</div>
              <div class="btn-text">Clientes</div>
            </a>
            <a class="dashboard-btn" href="https://script.google.com/macros/s/AKfycbzyPQPqWyzOJ6QUQaa8LD3sj2f3WgAh2VWuaP7BRmVxjSMlylO6BAAqOUl9YBHG6NcdVA/exec" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸ†”</div>
              <div class="btn-text">Personal</div>
            </a>
            <a class="dashboard-btn" href="https://docs.google.com/forms/d/1xHEMlOgV-DVXWbA1Z7xl9YkLdJyaAUDnhZkKr9G3iJ8/edit" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸ“£</div>
              <div class="btn-text">Publicidad</div>
            </a>
            <a class="dashboard-btn" href="https://docs.google.com/forms/d/1UTJ2QJRKPuJNgT75s3caVPr5rqFh37zwk62cj4GrtAg/edit?usp=forms_home" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸ“…</div>
              <div class="btn-text">Reservas</div>
            </a>
            <a class="dashboard-btn" href="https://docs.google.com/forms/d/1QDNTUEPd4Ka8Qyy__XYP4CAgK_GOUvekhy0eFPV-r5w/edit" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">â­</div>
              <div class="btn-text">ReseÃ±as</div>
            </a>
            <a class="dashboard-btn" href="https://docs.google.com/forms/d/1oNtJ3_JPhN_Hv1Ids4Wa2bRdxItYWQrv3dKTX1AwvPw/edit" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸ’²</div>
              <div class="btn-text">ValuaciÃ³n</div>
            </a>
            <a class="dashboard-btn" href="https://docs.google.com/forms/d/1CJvg2n62pieAFFSLxg7SXUURNHv90dVnLZECkR4EoUg/edit?pli=1" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸšª</div>
              <div class="btn-text">Visita</div>
            </a>
          </div>
        </section>

        <!-- Mapa -->
        <section id="map-section" class="section hidden iframe-section-style" role="region" aria-labelledby="map-title">
          <div class="section-header">
            <h2 id="map-title">Mapa de Inmuebles</h2>
            <p class="lead muted">VisualizaciÃ³n interactiva de propiedades.</p>
          </div>
          <div class="iframe-container">
            <iframe data-src="https://mapawarner-gfm7yydt6t5pg2k3qfjmwb.streamlit.app/?embed=true" title="Mapa de Inmuebles" loading="lazy"></iframe>
          </div>
        </section>

        <!-- Procedimientos -->
        <section id="procedimientos-section" class="section hidden" role="region" aria-labelledby="proc-title">
          <div class="section-header">
            <h2 id="proc-title">Procedimientos y Manuales</h2>
            <p class="lead muted">Material de capacitaciÃ³n y procesos operativos.</p>
          </div>

          <div class="tiles">
            <a class="dashboard-btn red" href="https://prezi.com/view/FIdlkdnOFVq5kLpcubLt/?referral_token=1NtU1RlnB3FN" target="_blank" rel="noopener noreferrer">
              <div class="btn-icon">ğŸ“•</div>
              <div class="btn-text">ValuaciÃ³n y CaptaciÃ³n</div>
            </a>
          </div>
        </section>

      </div> <!-- /.page -->
    </main>

  </div> <!-- /.app-layout -->

  <script>
    (function(){
      const appLayout = document.getElementById('app-layout');
      const sidebar = document.getElementById('sidebar');
      const sidebarToggle = document.getElementById('sidebar-toggle');
      const nav = document.getElementById('main-nav');
      const sections = document.querySelectorAll('main .section');

      // Delegated click handler for nav buttons (efficient)
      nav.addEventListener('click', (ev) => {
        const btn = ev.target.closest('.nav-button');
        if(!btn) return;

        // active state
        nav.querySelectorAll('.nav-button').forEach(n=>n.classList.remove('active'));
        btn.classList.add('active');

        // hide all sections
        sections.forEach(s => s.classList.add('hidden'));

        // show target
        const targetId = btn.getAttribute('data-target');
        if(targetId){
          const target = document.getElementById(targetId);
          if(target){
            target.classList.remove('hidden');

            // lazy load any iframe inside target
            const iframes = target.querySelectorAll('iframe[data-src]');
            iframes.forEach(iframe => {
              if(!iframe.src){
                iframe.src = iframe.dataset.src;
              }
            });
          }
        }

        // on small screens close sidebar
        if(window.innerWidth <= 800){
          appLayout.classList.remove('show-aside');
        }
      });

      // Sidebar toggle
      sidebarToggle.addEventListener('click', () => {
        // If wide screen, toggle collapsed grid
        if(window.innerWidth > 800){
          appLayout.classList.toggle('collapsed');
        } else {
          // mobile: show overlay sidebar class
          appLayout.classList.toggle('show-aside');
        }
      });

      // Initialize default open section
      document.addEventListener('DOMContentLoaded', () => {
        const defaultBtn = nav.querySelector('[data-target="database-section"]');
        if(defaultBtn){ defaultBtn.click(); }

        // ensure iframes on non-visible sections are not loaded until needed
        // (already using data-src and loading="lazy")
      });

      // Close sidebar if click outside on small screens
      document.addEventListener('click', (e) => {
        if(window.innerWidth <= 800 && appLayout.classList.contains('show-aside')){
          if(!e.target.closest('#sidebar') && !e.target.closest('#sidebar-toggle')){
            appLayout.classList.remove('show-aside');
          }
        }
      });

      // keyboard accessibility: allow ESC to close sidebar on mobile
      document.addEventListener('keydown', (e) => {
        if(e.key === 'Escape' && window.innerWidth <= 800){
          appLayout.classList.remove('show-aside');
        }
      });

      // handle window resize: if switching from mobile to desktop, ensure classes reset
      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          if(window.innerWidth > 800){
            appLayout.classList.remove('show-aside');
          }
        }, 120);
      });

    })();
  </script>
</body>
</html>
